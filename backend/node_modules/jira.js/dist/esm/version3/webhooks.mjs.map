{"version":3,"file":"webhooks.mjs","sources":["../../../../src/version3/webhooks.ts"],"sourcesContent":["import type * as Models from './models';\nimport type * as Parameters from './parameters';\nimport type { Client } from '../clients';\nimport type { Callback } from '../callback';\nimport type { RequestConfig } from '../requestConfig';\n\nexport class Webhooks {\n  constructor(private client: Client) {}\n\n  /**\n   * Returns a [paginated](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#pagination) list of the\n   * webhooks registered by the calling app.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async getDynamicWebhooksForApp<T = Models.PageWebhook>(\n    parameters: Parameters.GetDynamicWebhooksForApp | undefined,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns a [paginated](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#pagination) list of the\n   * webhooks registered by the calling app.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async getDynamicWebhooksForApp<T = Models.PageWebhook>(\n    parameters?: Parameters.GetDynamicWebhooksForApp,\n    callback?: never,\n  ): Promise<T>;\n  async getDynamicWebhooksForApp<T = Models.PageWebhook>(\n    parameters?: Parameters.GetDynamicWebhooksForApp,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/webhook',\n      method: 'GET',\n      params: {\n        startAt: parameters?.startAt,\n        maxResults: parameters?.maxResults,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Registers webhooks.\n   *\n   * **NOTE:** for non-public OAuth apps, webhooks are delivered only if there is a match between the app owner and the\n   * user who registered a dynamic webhook.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async registerDynamicWebhooks<T = Models.ContainerForRegisteredWebhooks>(\n    parameters: Parameters.RegisterDynamicWebhooks,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Registers webhooks.\n   *\n   * **NOTE:** for non-public OAuth apps, webhooks are delivered only if there is a match between the app owner and the\n   * user who registered a dynamic webhook.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async registerDynamicWebhooks<T = Models.ContainerForRegisteredWebhooks>(\n    parameters: Parameters.RegisterDynamicWebhooks,\n    callback?: never,\n  ): Promise<T>;\n  async registerDynamicWebhooks<T = Models.ContainerForRegisteredWebhooks>(\n    parameters: Parameters.RegisterDynamicWebhooks,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/webhook',\n      method: 'POST',\n      data: {\n        url: parameters.url,\n        webhooks: parameters.webhooks,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Removes webhooks by ID. Only webhooks registered by the calling app are removed. If webhooks created by other apps\n   * are specified, they are ignored.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async deleteWebhookById<T = unknown>(parameters: Parameters.DeleteWebhookById, callback: Callback<T>): Promise<void>;\n  /**\n   * Removes webhooks by ID. Only webhooks registered by the calling app are removed. If webhooks created by other apps\n   * are specified, they are ignored.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async deleteWebhookById<T = unknown>(parameters: Parameters.DeleteWebhookById, callback?: never): Promise<T>;\n  async deleteWebhookById<T = unknown>(\n    parameters: Parameters.DeleteWebhookById,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/webhook',\n      method: 'DELETE',\n      data: {\n        webhookIds: parameters.webhookIds,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns webhooks that have recently failed to be delivered to the requesting app after the maximum number of\n   * retries.\n   *\n   * After 72 hours the failure may no longer be returned by this operation.\n   *\n   * The oldest failure is returned first.\n   *\n   * This method uses a cursor-based pagination. To request the next page use the failure time of the last webhook on\n   * the list as the `failedAfter` value or use the URL provided in `next`.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect apps](https://developer.atlassian.com/cloud/jira/platform/index/#connect-apps) can use this operation.\n   */\n  async getFailedWebhooks<T = Models.FailedWebhooks>(\n    parameters: Parameters.GetFailedWebhooks | undefined,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns webhooks that have recently failed to be delivered to the requesting app after the maximum number of\n   * retries.\n   *\n   * After 72 hours the failure may no longer be returned by this operation.\n   *\n   * The oldest failure is returned first.\n   *\n   * This method uses a cursor-based pagination. To request the next page use the failure time of the last webhook on\n   * the list as the `failedAfter` value or use the URL provided in `next`.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect apps](https://developer.atlassian.com/cloud/jira/platform/index/#connect-apps) can use this operation.\n   */\n  async getFailedWebhooks<T = Models.FailedWebhooks>(\n    parameters?: Parameters.GetFailedWebhooks,\n    callback?: never,\n  ): Promise<T>;\n  async getFailedWebhooks<T = Models.FailedWebhooks>(\n    parameters?: Parameters.GetFailedWebhooks,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/webhook/failed',\n      method: 'GET',\n      params: {\n        maxResults: parameters?.maxResults,\n        after: parameters?.after,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Extends the life of webhook. Webhooks registered through the REST API expire after 30 days. Call this operation to\n   * keep them alive.\n   *\n   * Unrecognized webhook IDs (those that are not found or belong to other apps) are ignored.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async refreshWebhooks<T = Models.WebhooksExpirationDate>(\n    parameters: Parameters.RefreshWebhooks,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Extends the life of webhook. Webhooks registered through the REST API expire after 30 days. Call this operation to\n   * keep them alive.\n   *\n   * Unrecognized webhook IDs (those that are not found or belong to other apps) are ignored.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** Only\n   * [Connect](https://developer.atlassian.com/cloud/jira/platform/#connect-apps) and [OAuth\n   * 2.0](https://developer.atlassian.com/cloud/jira/platform/oauth-2-3lo-apps) apps can use this operation.\n   */\n  async refreshWebhooks<T = Models.WebhooksExpirationDate>(\n    parameters: Parameters.RefreshWebhooks,\n    callback?: never,\n  ): Promise<T>;\n  async refreshWebhooks<T = Models.WebhooksExpirationDate>(\n    parameters: Parameters.RefreshWebhooks,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/webhook/refresh',\n      method: 'PUT',\n      data: {\n        webhookIds: parameters.webhookIds,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n}\n"],"names":[],"mappings":"MAMa,QAAQ,CAAA;AACC,IAAA,MAAA;AAApB,IAAA,WAAA,CAAoB,MAAc,EAAA;QAAd,IAAA,CAAA,MAAM,GAAN,MAAM;IAAW;AA0BrC,IAAA,MAAM,wBAAwB,CAC5B,UAAgD,EAChD,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,qBAAqB;AAC1B,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,MAAM,EAAE;gBACN,OAAO,EAAE,UAAU,EAAE,OAAO;gBAC5B,UAAU,EAAE,UAAU,EAAE,UAAU;AACnC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AA8BA,IAAA,MAAM,uBAAuB,CAC3B,UAA8C,EAC9C,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,qBAAqB;AAC1B,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,IAAI,EAAE;gBACJ,GAAG,EAAE,UAAU,CAAC,GAAG;gBACnB,QAAQ,EAAE,UAAU,CAAC,QAAQ;AAC9B,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAoBA,IAAA,MAAM,iBAAiB,CACrB,UAAwC,EACxC,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,qBAAqB;AAC1B,YAAA,MAAM,EAAE,QAAQ;AAChB,YAAA,IAAI,EAAE;gBACJ,UAAU,EAAE,UAAU,CAAC,UAAU;AAClC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAsCA,IAAA,MAAM,iBAAiB,CACrB,UAAyC,EACzC,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,4BAA4B;AACjC,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,MAAM,EAAE;gBACN,UAAU,EAAE,UAAU,EAAE,UAAU;gBAClC,KAAK,EAAE,UAAU,EAAE,KAAK;AACzB,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AA8BA,IAAA,MAAM,eAAe,CACnB,UAAsC,EACtC,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,6BAA6B;AAClC,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,IAAI,EAAE;gBACJ,UAAU,EAAE,UAAU,CAAC,UAAU;AAClC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AACD;;;;"}