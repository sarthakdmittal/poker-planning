{"version":3,"file":"jiraExpressions.mjs","sources":["../../../../src/version3/jiraExpressions.ts"],"sourcesContent":["import type * as Models from './models';\nimport type * as Parameters from './parameters';\nimport type { Client } from '../clients';\nimport type { Callback } from '../callback';\nimport type { RequestConfig } from '../requestConfig';\n\nexport class JiraExpressions {\n  constructor(private client: Client) {}\n\n  /**\n   * Analyses and validates Jira expressions.\n   *\n   * As an experimental feature, this operation can also attempt to type-check the expressions.\n   *\n   * Learn more about Jira expressions in the\n   * [documentation](https://developer.atlassian.com/cloud/jira/platform/jira-expressions/).\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required**: None.\n   */\n  async analyseExpression<T = Models.JiraExpressionsAnalysis>(\n    parameters: Parameters.AnalyseExpression | undefined,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Analyses and validates Jira expressions.\n   *\n   * As an experimental feature, this operation can also attempt to type-check the expressions.\n   *\n   * Learn more about Jira expressions in the\n   * [documentation](https://developer.atlassian.com/cloud/jira/platform/jira-expressions/).\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required**: None.\n   */\n  async analyseExpression<T = Models.JiraExpressionsAnalysis>(\n    parameters?: Parameters.AnalyseExpression,\n    callback?: never,\n  ): Promise<T>;\n  async analyseExpression<T = Models.JiraExpressionsAnalysis>(\n    parameters?: Parameters.AnalyseExpression,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/expression/analyse',\n      method: 'POST',\n      params: {\n        check: parameters?.check,\n      },\n      data: {\n        contextVariables: parameters?.contextVariables,\n        expressions: parameters?.expressions,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * @deprecated Endpoint is currently being removed. [More\n   *   details](https://developer.atlassian.com/changelog/#CHANGE-2046)\n   *\n   *   Evaluates a Jira expression and returns its value.\n   *\n   *   This resource can be used to test Jira expressions that you plan to use elsewhere, or to fetch data in a flexible\n   *   way. Consult the [Jira expressions\n   *   documentation](https://developer.atlassian.com/cloud/jira/platform/jira-expressions/) for more details.\n   *\n   *   #### Context variables\n   *\n   *   The following context variables are available to Jira expressions evaluated by this resource. Their presence\n   *   depends on various factors; usually you need to manually request them in the context object sent in the payload,\n   *   but some of them are added automatically under certain conditions.\n   *\n   *   - `user` ([User](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)): The\n   *       current user. Always available and equal to `null` if the request is anonymous.\n   *   - `app` ([App](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#app)): The\n   *       [Connect app](https://developer.atlassian.com/cloud/jira/platform/index/#connect-apps) that made the request.\n   *       Available only for authenticated requests made by Connect Apps (read more here: [Authentication for Connect\n   *       apps](https://developer.atlassian.com/cloud/jira/platform/security-for-connect-apps/)).\n   *   - `issue` ([Issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): The\n   *       current issue. Available only when the issue is provided in the request context object.\n   *   - `issues` ([List](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#list) of\n   *       [Issues](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): A\n   *       collection of issues matching a JQL query. Available only when JQL is provided in the request context\n   *       object.\n   *   - `project` ([Project](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#project)):\n   *       The current project. Available only when the project is provided in the request context object.\n   *   - `sprint` ([Sprint](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#sprint)):\n   *       The current sprint. Available only when the sprint is provided in the request context object.\n   *   - `board` ([Board](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#board)): The\n   *       current board. Available only when the board is provided in the request context object.\n   *   - `serviceDesk`\n   *       ([ServiceDesk](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#servicedesk)):\n   *       The current service desk. Available only when the service desk is provided in the request context object.\n   *   - `customerRequest`\n   *       ([CustomerRequest](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#customerrequest)):\n   *       The current customer request. Available only when the customer request is provided in the request context\n   *       object.\n   *\n   *   Also, custom context variables can be passed in the request with their types. Those variables can be accessed by\n   *   key in the Jira expression. These variable types are available for use in a custom context:\n   *\n   *   - `user`: A [user](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)\n   *       specified as an Atlassian account ID.\n   *   - `issue`: An [issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)\n   *       specified by ID or key. All the fields of the issue object are available in the Jira expression.\n   *   - `json`: A JSON object containing custom content.\n   *   - `list`: A JSON list of `user`, `issue`, or `json` variable types.\n   *\n   *   This operation can be accessed anonymously.\n   *\n   *   **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required**: None.\n   *   However, an expression may return different results for different users depending on their permissions. For\n   *   example, different users may see different comments on the same issue.\\\n   *   Permission to access Jira Software is required to access Jira Software context variables (`board` and `sprint`) or\n   *   fields (for example, `issue.sprint`).\n   */\n  async evaluateJiraExpression<T = Models.JiraExpressionResult>(\n    parameters: Parameters.EvaluateJiraExpression,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * @deprecated Endpoint is currently being removed. [More\n   *   details](https://developer.atlassian.com/changelog/#CHANGE-2046)\n   *\n   *   Evaluates a Jira expression and returns its value.\n   *\n   *   This resource can be used to test Jira expressions that you plan to use elsewhere, or to fetch data in a flexible\n   *   way. Consult the [Jira expressions\n   *   documentation](https://developer.atlassian.com/cloud/jira/platform/jira-expressions/) for more details.\n   *\n   *   #### Context variables\n   *\n   *   The following context variables are available to Jira expressions evaluated by this resource. Their presence\n   *   depends on various factors; usually you need to manually request them in the context object sent in the payload,\n   *   but some of them are added automatically under certain conditions.\n   *\n   *   - `user` ([User](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)): The\n   *       current user. Always available and equal to `null` if the request is anonymous.\n   *   - `app` ([App](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#app)): The\n   *       [Connect app](https://developer.atlassian.com/cloud/jira/platform/index/#connect-apps) that made the request.\n   *       Available only for authenticated requests made by Connect Apps (read more here: [Authentication for Connect\n   *       apps](https://developer.atlassian.com/cloud/jira/platform/security-for-connect-apps/)).\n   *   - `issue` ([Issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): The\n   *       current issue. Available only when the issue is provided in the request context object.\n   *   - `issues` ([List](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#list) of\n   *       [Issues](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): A\n   *       collection of issues matching a JQL query. Available only when JQL is provided in the request context\n   *       object.\n   *   - `project` ([Project](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#project)):\n   *       The current project. Available only when the project is provided in the request context object.\n   *   - `sprint` ([Sprint](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#sprint)):\n   *       The current sprint. Available only when the sprint is provided in the request context object.\n   *   - `board` ([Board](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#board)): The\n   *       current board. Available only when the board is provided in the request context object.\n   *   - `serviceDesk`\n   *       ([ServiceDesk](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#servicedesk)):\n   *       The current service desk. Available only when the service desk is provided in the request context object.\n   *   - `customerRequest`\n   *       ([CustomerRequest](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#customerrequest)):\n   *       The current customer request. Available only when the customer request is provided in the request context\n   *       object.\n   *\n   *   Also, custom context variables can be passed in the request with their types. Those variables can be accessed by\n   *   key in the Jira expression. These variable types are available for use in a custom context:\n   *\n   *   - `user`: A [user](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)\n   *       specified as an Atlassian account ID.\n   *   - `issue`: An [issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)\n   *       specified by ID or key. All the fields of the issue object are available in the Jira expression.\n   *   - `json`: A JSON object containing custom content.\n   *   - `list`: A JSON list of `user`, `issue`, or `json` variable types.\n   *\n   *   This operation can be accessed anonymously.\n   *\n   *   **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required**: None.\n   *   However, an expression may return different results for different users depending on their permissions. For\n   *   example, different users may see different comments on the same issue.\\\n   *   Permission to access Jira Software is required to access Jira Software context variables (`board` and `sprint`) or\n   *   fields (for example, `issue.sprint`).\n   */\n  async evaluateJiraExpression<T = Models.JiraExpressionResult>(\n    parameters: Parameters.EvaluateJiraExpression,\n    callback?: never,\n  ): Promise<T>;\n  async evaluateJiraExpression<T = Models.JiraExpressionResult>(\n    parameters: Parameters.EvaluateJiraExpression,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/expression/eval',\n      method: 'POST',\n      params: {\n        expand: parameters.expand,\n      },\n      data: {\n        context: parameters.context,\n        expression: parameters.expression,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Evaluates a Jira expression and returns its value. The difference between this and `eval` is that this endpoint\n   * uses the enhanced search API when evaluating JQL queries. This API is eventually consistent, unlike the strongly\n   * consistent `eval` API. This allows for better performance and scalability. In addition, this API's response for JQL\n   * evaluation is based on a scrolling view (backed by a `nextPageToken`) instead of a paginated view (backed by\n   * `startAt` and `totalCount`).\n   *\n   * This resource can be used to test Jira expressions that you plan to use elsewhere, or to fetch data in a flexible\n   * way. Consult the [Jira expressions\n   * documentation](https://developer.atlassian.com/cloud/jira/platform/jira-expressions/) for more details.\n   *\n   * #### Context variables\n   *\n   * The following context variables are available to Jira expressions evaluated by this resource. Their presence\n   * depends on various factors; usually you need to manually request them in the context object sent in the payload,\n   * but some of them are added automatically under certain conditions.\n   *\n   * - `user` ([User](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)): The\n   *   current user. Always available and equal to `null` if the request is anonymous.\n   * - `app` ([App](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#app)): The\n   *   [Connect app](https://developer.atlassian.com/cloud/jira/platform/index/#connect-apps) that made the request.\n   *   Available only for authenticated requests made by Connect apps (read more here: [Authentication for Connect\n   *   apps](https://developer.atlassian.com/cloud/jira/platform/security-for-connect-apps/)).\n   * - `issue` ([Issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): The\n   *   current issue. Available only when the issue is provided in the request context object.\n   * - `issues` ([List](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#list) of\n   *   [Issues](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): A\n   *   collection of issues matching a JQL query. Available only when JQL is provided in the request context object.\n   * - `project` ([Project](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#project)):\n   *   The current project. Available only when the project is provided in the request context object.\n   * - `sprint` ([Sprint](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#sprint)):\n   *   The current sprint. Available only when the sprint is provided in the request context object.\n   * - `board` ([Board](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#board)): The\n   *   current board. Available only when the board is provided in the request context object.\n   * - `serviceDesk`\n   *   ([ServiceDesk](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#servicedesk)):\n   *   The current service desk. Available only when the service desk is provided in the request context object.\n   * - `customerRequest`\n   *   ([CustomerRequest](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#customerrequest)):\n   *   The current customer request. Available only when the customer request is provided in the request context\n   *   object.\n   *\n   * In addition, you can pass custom context variables along with their types. You can then access them from the Jira\n   * expression by key. You can use the following variables in a custom context:\n   *\n   * - `user`: A [user](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)\n   *   specified as an Atlassian account ID.\n   * - `issue`: An [issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)\n   *   specified by ID or key. All the fields of the issue object are available in the Jira expression.\n   * - `json`: A JSON object containing custom content.\n   * - `list`: A JSON list of `user`, `issue`, or `json` variable types.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required**: None.\n   * However, an expression may return different results for different users depending on their permissions. For\n   * example, different users may see different comments on the same issue.\\\n   * Permission to access Jira Software is required to access Jira Software context variables (`board` and `sprint`) or\n   * fields (for example, `issue.sprint`).\n   */\n  async evaluateJiraExpressionUsingEnhancedSearch<T = Models.EvaluatedJiraExpression>(\n    parameters: Parameters.EvaluateJiraExpressionUsingEnhancedSearch,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Evaluates a Jira expression and returns its value. The difference between this and `eval` is that this endpoint\n   * uses the enhanced search API when evaluating JQL queries. This API is eventually consistent, unlike the strongly\n   * consistent `eval` API. This allows for better performance and scalability. In addition, this API's response for JQL\n   * evaluation is based on a scrolling view (backed by a `nextPageToken`) instead of a paginated view (backed by\n   * `startAt` and `totalCount`).\n   *\n   * This resource can be used to test Jira expressions that you plan to use elsewhere, or to fetch data in a flexible\n   * way. Consult the [Jira expressions\n   * documentation](https://developer.atlassian.com/cloud/jira/platform/jira-expressions/) for more details.\n   *\n   * #### Context variables\n   *\n   * The following context variables are available to Jira expressions evaluated by this resource. Their presence\n   * depends on various factors; usually you need to manually request them in the context object sent in the payload,\n   * but some of them are added automatically under certain conditions.\n   *\n   * - `user` ([User](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)): The\n   *   current user. Always available and equal to `null` if the request is anonymous.\n   * - `app` ([App](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#app)): The\n   *   [Connect app](https://developer.atlassian.com/cloud/jira/platform/index/#connect-apps) that made the request.\n   *   Available only for authenticated requests made by Connect apps (read more here: [Authentication for Connect\n   *   apps](https://developer.atlassian.com/cloud/jira/platform/security-for-connect-apps/)).\n   * - `issue` ([Issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): The\n   *   current issue. Available only when the issue is provided in the request context object.\n   * - `issues` ([List](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#list) of\n   *   [Issues](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)): A\n   *   collection of issues matching a JQL query. Available only when JQL is provided in the request context object.\n   * - `project` ([Project](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#project)):\n   *   The current project. Available only when the project is provided in the request context object.\n   * - `sprint` ([Sprint](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#sprint)):\n   *   The current sprint. Available only when the sprint is provided in the request context object.\n   * - `board` ([Board](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#board)): The\n   *   current board. Available only when the board is provided in the request context object.\n   * - `serviceDesk`\n   *   ([ServiceDesk](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#servicedesk)):\n   *   The current service desk. Available only when the service desk is provided in the request context object.\n   * - `customerRequest`\n   *   ([CustomerRequest](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#customerrequest)):\n   *   The current customer request. Available only when the customer request is provided in the request context\n   *   object.\n   *\n   * In addition, you can pass custom context variables along with their types. You can then access them from the Jira\n   * expression by key. You can use the following variables in a custom context:\n   *\n   * - `user`: A [user](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#user)\n   *   specified as an Atlassian account ID.\n   * - `issue`: An [issue](https://developer.atlassian.com/cloud/jira/platform/jira-expressions-type-reference#issue)\n   *   specified by ID or key. All the fields of the issue object are available in the Jira expression.\n   * - `json`: A JSON object containing custom content.\n   * - `list`: A JSON list of `user`, `issue`, or `json` variable types.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required**: None.\n   * However, an expression may return different results for different users depending on their permissions. For\n   * example, different users may see different comments on the same issue.\\\n   * Permission to access Jira Software is required to access Jira Software context variables (`board` and `sprint`) or\n   * fields (for example, `issue.sprint`).\n   */\n  async evaluateJiraExpressionUsingEnhancedSearch<T = Models.EvaluatedJiraExpression>(\n    parameters: Parameters.EvaluateJiraExpressionUsingEnhancedSearch,\n    callback?: never,\n  ): Promise<T>;\n  async evaluateJiraExpressionUsingEnhancedSearch<T = Models.EvaluatedJiraExpression>(\n    parameters: Parameters.EvaluateJiraExpressionUsingEnhancedSearch,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/expression/evaluate',\n      method: 'POST',\n      params: {\n        expand: parameters.expand,\n      },\n      data: {\n        context: parameters.context,\n        expression: parameters.expression,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n}\n"],"names":[],"mappings":"MAMa,eAAe,CAAA;AACN,IAAA,MAAA;AAApB,IAAA,WAAA,CAAoB,MAAc,EAAA;QAAd,IAAA,CAAA,MAAM,GAAN,MAAM;IAAW;AA8BrC,IAAA,MAAM,iBAAiB,CACrB,UAAyC,EACzC,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,gCAAgC;AACrC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,MAAM,EAAE;gBACN,KAAK,EAAE,UAAU,EAAE,KAAK;AACzB,aAAA;AACD,YAAA,IAAI,EAAE;gBACJ,gBAAgB,EAAE,UAAU,EAAE,gBAAgB;gBAC9C,WAAW,EAAE,UAAU,EAAE,WAAW;AACrC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAkIA,IAAA,MAAM,sBAAsB,CAC1B,UAA6C,EAC7C,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,6BAA6B;AAClC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,MAAM,EAAE;gBACN,MAAM,EAAE,UAAU,CAAC,MAAM;AAC1B,aAAA;AACD,YAAA,IAAI,EAAE;gBACJ,OAAO,EAAE,UAAU,CAAC,OAAO;gBAC3B,UAAU,EAAE,UAAU,CAAC,UAAU;AAClC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAkIA,IAAA,MAAM,yCAAyC,CAC7C,UAAgE,EAChE,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,iCAAiC;AACtC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,MAAM,EAAE;gBACN,MAAM,EAAE,UAAU,CAAC,MAAM;AAC1B,aAAA;AACD,YAAA,IAAI,EAAE;gBACJ,OAAO,EAAE,UAAU,CAAC,OAAO;gBAC3B,UAAU,EAAE,UAAU,CAAC,UAAU;AAClC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AACD;;;;"}