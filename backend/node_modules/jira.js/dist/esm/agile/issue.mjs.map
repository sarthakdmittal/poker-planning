{"version":3,"file":"issue.mjs","sources":["../../../../src/agile/issue.ts"],"sourcesContent":["import type * as Models from './models';\nimport type * as Parameters from './parameters';\nimport type { Client } from '../clients';\nimport type { Callback } from '../callback';\nimport type { RequestConfig } from '../requestConfig';\n\nexport class Issue {\n  constructor(private client: Client) {}\n\n  /**\n   * Moves (ranks) issues before or after a given issue. At most 50 issues may be ranked at once.\n   *\n   * This operation may fail for some issues, although this will be rare. In that case the 207 status code is returned\n   * for the whole response and detailed information regarding each issue is available in the response body.\n   *\n   * If rankCustomFieldId is not defined, the default rank field will be used.\n   */\n  async rankIssues<T = void>(parameters: Parameters.RankIssues, callback: Callback<T>): Promise<void>;\n  /**\n   * Moves (ranks) issues before or after a given issue. At most 50 issues may be ranked at once.\n   *\n   * This operation may fail for some issues, although this will be rare. In that case the 207 status code is returned\n   * for the whole response and detailed information regarding each issue is available in the response body.\n   *\n   * If rankCustomFieldId is not defined, the default rank field will be used.\n   */\n  async rankIssues<T = void>(parameters: Parameters.RankIssues, callback?: never): Promise<T>;\n  async rankIssues<T = void>(parameters: Parameters.RankIssues, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/agile/1.0/issue/rank',\n      method: 'PUT',\n      data: {\n        issues: parameters.issues,\n        rankAfterIssue: parameters.rankAfterIssue,\n        rankBeforeIssue: parameters.rankBeforeIssue,\n        rankCustomFieldId: parameters.rankCustomFieldId,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns a single issue, for a given issue ID or issue key. Issues returned from this resource include Agile fields,\n   * like sprint, closedSprints, flagged, and epic.\n   */\n  async getIssue<T = Models.Issue>(parameters: Parameters.GetIssue, callback: Callback<T>): Promise<void>;\n  /**\n   * Returns a single issue, for a given issue ID or issue key. Issues returned from this resource include Agile fields,\n   * like sprint, closedSprints, flagged, and epic.\n   */\n  async getIssue<T = Models.Issue>(parameters: Parameters.GetIssue, callback?: never): Promise<T>;\n  async getIssue<T = Models.Issue>(parameters: Parameters.GetIssue, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/agile/1.0/issue/${parameters.issueIdOrKey}`,\n      method: 'GET',\n      params: {\n        fields: parameters.fields,\n        expand: parameters.expand,\n        updateHistory: parameters.updateHistory,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns the estimation of the issue and a fieldId of the field that is used for it. `boardId` param is required.\n   * This param determines which field will be updated on a issue.\n   *\n   * Original time internally stores and returns the estimation as a number of seconds.\n   *\n   * The field used for estimation on the given board can be obtained from [board configuration\n   * resource](#agile/1.0/board-getConfiguration). More information about the field are returned by [edit meta\n   * resource](#api-rest-api-3-issue-getEditIssueMeta) or [field resource](#api-rest-api-3-field-get).\n   */\n  async getIssueEstimationForBoard<T = unknown>(\n    parameters: Parameters.GetIssueEstimationForBoard,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns the estimation of the issue and a fieldId of the field that is used for it. `boardId` param is required.\n   * This param determines which field will be updated on a issue.\n   *\n   * Original time internally stores and returns the estimation as a number of seconds.\n   *\n   * The field used for estimation on the given board can be obtained from [board configuration\n   * resource](#agile/1.0/board-getConfiguration). More information about the field are returned by [edit meta\n   * resource](#api-rest-api-3-issue-getEditIssueMeta) or [field resource](#api-rest-api-3-field-get).\n   */\n  async getIssueEstimationForBoard<T = unknown>(\n    parameters: Parameters.GetIssueEstimationForBoard,\n    callback?: never,\n  ): Promise<T>;\n  async getIssueEstimationForBoard<T = unknown>(\n    parameters: Parameters.GetIssueEstimationForBoard,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/agile/1.0/issue/${parameters.issueIdOrKey}/estimation`,\n      method: 'GET',\n      params: {\n        boardId: parameters.boardId,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Updates the estimation of the issue. boardId param is required. This param determines which field will be updated\n   * on an issue.\n   *\n   * Note that this resource changes the estimation field of the issue regardless of appearance the field on the screen.\n   *\n   * Original time tracking estimation field accepts estimation in formats like \"1w\", \"2d\", \"3h\", \"20m\" or number which\n   * represent number of minutes. However, internally the field stores and returns the estimation as a number of\n   * seconds.\n   *\n   * The field used for estimation on the given board can be obtained from [board configuration\n   * resource](#agile/1.0/board-getConfiguration). More information about the field are returned by [edit meta\n   * resource](#api-rest-api-3-issue-issueIdOrKey-editmeta-get) or [field resource](#api-rest-api-3-field-get).\n   */\n  async estimateIssueForBoard<T = unknown>(\n    parameters: Parameters.EstimateIssueForBoard,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Updates the estimation of the issue. boardId param is required. This param determines which field will be updated\n   * on an issue.\n   *\n   * Note that this resource changes the estimation field of the issue regardless of appearance the field on the screen.\n   *\n   * Original time tracking estimation field accepts estimation in formats like \"1w\", \"2d\", \"3h\", \"20m\" or number which\n   * represent number of minutes. However, internally the field stores and returns the estimation as a number of\n   * seconds.\n   *\n   * The field used for estimation on the given board can be obtained from [board configuration\n   * resource](#agile/1.0/board-getConfiguration). More information about the field are returned by [edit meta\n   * resource](#api-rest-api-3-issue-issueIdOrKey-editmeta-get) or [field resource](#api-rest-api-3-field-get).\n   */\n  async estimateIssueForBoard<T = unknown>(parameters: Parameters.EstimateIssueForBoard, callback?: never): Promise<T>;\n  async estimateIssueForBoard<T = unknown>(\n    parameters: Parameters.EstimateIssueForBoard,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/agile/1.0/issue/${parameters.issueIdOrKey}/estimation`,\n      method: 'PUT',\n      params: {\n        boardId: parameters.boardId,\n      },\n      data: {\n        value: parameters.value,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n}\n"],"names":[],"mappings":"MAMa,KAAK,CAAA;AACI,IAAA,MAAA;AAApB,IAAA,WAAA,CAAoB,MAAc,EAAA;QAAd,IAAA,CAAA,MAAM,GAAN,MAAM;IAAW;AAoBrC,IAAA,MAAM,UAAU,CAAW,UAAiC,EAAE,QAAsB,EAAA;AAClF,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,4BAA4B;AACjC,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,IAAI,EAAE;gBACJ,MAAM,EAAE,UAAU,CAAC,MAAM;gBACzB,cAAc,EAAE,UAAU,CAAC,cAAc;gBACzC,eAAe,EAAE,UAAU,CAAC,eAAe;gBAC3C,iBAAiB,EAAE,UAAU,CAAC,iBAAiB;AAChD,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAYA,IAAA,MAAM,QAAQ,CAAmB,UAA+B,EAAE,QAAsB,EAAA;AACtF,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,CAAA,sBAAA,EAAyB,UAAU,CAAC,YAAY,CAAA,CAAE;AACvD,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,MAAM,EAAE;gBACN,MAAM,EAAE,UAAU,CAAC,MAAM;gBACzB,MAAM,EAAE,UAAU,CAAC,MAAM;gBACzB,aAAa,EAAE,UAAU,CAAC,aAAa;AACxC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AA8BA,IAAA,MAAM,0BAA0B,CAC9B,UAAiD,EACjD,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,CAAA,sBAAA,EAAyB,UAAU,CAAC,YAAY,CAAA,WAAA,CAAa;AAClE,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,MAAM,EAAE;gBACN,OAAO,EAAE,UAAU,CAAC,OAAO;AAC5B,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAmCA,IAAA,MAAM,qBAAqB,CACzB,UAA4C,EAC5C,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,CAAA,sBAAA,EAAyB,UAAU,CAAC,YAAY,CAAA,WAAA,CAAa;AAClE,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,MAAM,EAAE;gBACN,OAAO,EAAE,UAAU,CAAC,OAAO;AAC5B,aAAA;AACD,YAAA,IAAI,EAAE;gBACJ,KAAK,EAAE,UAAU,CAAC,KAAK;AACxB,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AACD;;;;"}