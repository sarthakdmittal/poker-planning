{"version":3,"file":"permissions.cjs","sources":["../../../../src/version3/permissions.ts"],"sourcesContent":["import type * as Models from './models';\nimport type * as Parameters from './parameters';\nimport type { Client } from '../clients';\nimport type { Callback } from '../callback';\nimport type { RequestConfig } from '../requestConfig';\n\nexport class Permissions {\n  constructor(private client: Client) {}\n\n  /**\n   * Returns a list of permissions indicating which permissions the user has. Details of the user's permissions can be\n   * obtained in a global, project, issue or comment context.\n   *\n   * The user is reported as having a project permission:\n   *\n   * - In the global context, if the user has the project permission in any project.\n   * - For a project, where the project permission is determined using issue data, if the user meets the permission's\n   *   criteria for any issue in the project. Otherwise, if the user has the project permission in the project.\n   * - For an issue, where a project permission is determined using issue data, if the user has the permission in the\n   *   issue. Otherwise, if the user has the project permission in the project containing the issue.\n   * - For a comment, where the user has both the permission to browse the comment and the project permission for the\n   *   comment's parent issue. Only the BROWSE_PROJECTS permission is supported. If a `commentId` is provided whose\n   *   `permissions` does not equal BROWSE_PROJECTS, a 400 error will be returned.\n   *\n   * This means that users may be shown as having an issue permission (such as EDIT_ISSUES) in the global context or a\n   * project context but may not have the permission for any or all issues. For example, if Reporters have the\n   * EDIT_ISSUES permission a user would be shown as having this permission in the global context or the context of a\n   * project, because any user can be a reporter. However, if they are not the user who reported the issue queried they\n   * would not have EDIT_ISSUES permission for that issue.\n   *\n   * For [Jira Service Management project\n   * permissions](https://support.atlassian.com/jira-cloud-administration/docs/customize-jira-service-management-permissions/),\n   * this will be evaluated similarly to a user in the customer portal. For example, if the BROWSE_PROJECTS permission\n   * is granted to Service Project Customer - Portal Access, any users with access to the customer portal will have the\n   * BROWSE_PROJECTS permission.\n   *\n   * Global permissions are unaffected by context.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** None.\n   */\n  async getMyPermissions<T = Models.Permissions>(\n    parameters: Parameters.GetMyPermissions | undefined,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns a list of permissions indicating which permissions the user has. Details of the user's permissions can be\n   * obtained in a global, project, issue or comment context.\n   *\n   * The user is reported as having a project permission:\n   *\n   * - In the global context, if the user has the project permission in any project.\n   * - For a project, where the project permission is determined using issue data, if the user meets the permission's\n   *   criteria for any issue in the project. Otherwise, if the user has the project permission in the project.\n   * - For an issue, where a project permission is determined using issue data, if the user has the permission in the\n   *   issue. Otherwise, if the user has the project permission in the project containing the issue.\n   * - For a comment, where the user has both the permission to browse the comment and the project permission for the\n   *   comment's parent issue. Only the BROWSE_PROJECTS permission is supported. If a `commentId` is provided whose\n   *   `permissions` does not equal BROWSE_PROJECTS, a 400 error will be returned.\n   *\n   * This means that users may be shown as having an issue permission (such as EDIT_ISSUES) in the global context or a\n   * project context but may not have the permission for any or all issues. For example, if Reporters have the\n   * EDIT_ISSUES permission a user would be shown as having this permission in the global context or the context of a\n   * project, because any user can be a reporter. However, if they are not the user who reported the issue queried they\n   * would not have EDIT_ISSUES permission for that issue.\n   *\n   * For [Jira Service Management project\n   * permissions](https://support.atlassian.com/jira-cloud-administration/docs/customize-jira-service-management-permissions/),\n   * this will be evaluated similarly to a user in the customer portal. For example, if the BROWSE_PROJECTS permission\n   * is granted to Service Project Customer - Portal Access, any users with access to the customer portal will have the\n   * BROWSE_PROJECTS permission.\n   *\n   * Global permissions are unaffected by context.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** None.\n   */\n  async getMyPermissions<T = Models.Permissions>(\n    parameters?: Parameters.GetMyPermissions,\n    callback?: never,\n  ): Promise<T>;\n  async getMyPermissions<T = Models.Permissions>(\n    parameters?: Parameters.GetMyPermissions,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/mypermissions',\n      method: 'GET',\n      params: {\n        projectKey: parameters?.projectKey,\n        projectId: parameters?.projectId,\n        issueKey: parameters?.issueKey,\n        issueId: parameters?.issueId,\n        permissions: parameters?.permissions,\n        projectUuid: parameters?.projectUuid,\n        projectConfigurationUuid: parameters?.projectConfigurationUuid,\n        commentId: parameters?.commentId,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns all permissions, including:\n   *\n   * - Global permissions.\n   * - Project permissions.\n   * - Global permissions added by plugins.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** None.\n   */\n  async getAllPermissions<T = Models.Permissions>(callback: Callback<T>): Promise<void>;\n  /**\n   * Returns all permissions, including:\n   *\n   * - Global permissions.\n   * - Project permissions.\n   * - Global permissions added by plugins.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** None.\n   */\n  async getAllPermissions<T = Models.Permissions>(callback?: never): Promise<T>;\n  async getAllPermissions<T = Models.Permissions>(callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/permissions',\n      method: 'GET',\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns:\n   *\n   * - For a list of global permissions, the global permissions granted to a user.\n   * - For a list of project permissions and lists of projects and issues, for each project permission a list of the\n   *   projects and issues a user can access or manipulate.\n   *\n   * If no account ID is provided, the operation returns details for the logged in user.\n   *\n   * Note that:\n   *\n   * - Invalid project and issue IDs are ignored.\n   * - A maximum of 1000 projects and 1000 issues can be checked.\n   * - Null values in `globalPermissions`, `projectPermissions`, `projectPermissions.projects`, and\n   *   `projectPermissions.issues` are ignored.\n   * - Empty strings in `projectPermissions.permissions` are ignored.\n   *\n   * **Deprecation notice:** The required OAuth 2.0 scopes will be updated on June 15, 2024.\n   *\n   * - **Classic**: `read:jira-work`\n   * - **Granular**: `read:permission:jira`\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   * _Administer Jira_ [global permission](https://confluence.atlassian.com/x/x4dKLg) to check the permissions for other\n   * users, otherwise none. However, Connect apps can make a call from the app server to the product to obtain\n   * permission details for any user, without admin permission. This Connect app ability doesn't apply to calls made\n   * using AP.request() in a browser.\n   */\n  async getBulkPermissions<T = Models.BulkPermissionGrants>(\n    parameters: Parameters.GetBulkPermissions | undefined,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns:\n   *\n   * - For a list of global permissions, the global permissions granted to a user.\n   * - For a list of project permissions and lists of projects and issues, for each project permission a list of the\n   *   projects and issues a user can access or manipulate.\n   *\n   * If no account ID is provided, the operation returns details for the logged in user.\n   *\n   * Note that:\n   *\n   * - Invalid project and issue IDs are ignored.\n   * - A maximum of 1000 projects and 1000 issues can be checked.\n   * - Null values in `globalPermissions`, `projectPermissions`, `projectPermissions.projects`, and\n   *   `projectPermissions.issues` are ignored.\n   * - Empty strings in `projectPermissions.permissions` are ignored.\n   *\n   * **Deprecation notice:** The required OAuth 2.0 scopes will be updated on June 15, 2024.\n   *\n   * - **Classic**: `read:jira-work`\n   * - **Granular**: `read:permission:jira`\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   * _Administer Jira_ [global permission](https://confluence.atlassian.com/x/x4dKLg) to check the permissions for other\n   * users, otherwise none. However, Connect apps can make a call from the app server to the product to obtain\n   * permission details for any user, without admin permission. This Connect app ability doesn't apply to calls made\n   * using AP.request() in a browser.\n   */\n  async getBulkPermissions<T = Models.BulkPermissionGrants>(\n    parameters?: Parameters.GetBulkPermissions,\n    callback?: never,\n  ): Promise<T>;\n  async getBulkPermissions<T = Models.BulkPermissionGrants>(\n    parameters?: Parameters.GetBulkPermissions,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/permissions/check',\n      method: 'POST',\n      data: {\n        accountId: parameters?.accountId,\n        globalPermissions: parameters?.globalPermissions,\n        projectPermissions: parameters?.projectPermissions,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns all the projects where the user is granted a list of project permissions.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** None.\n   */\n  async getPermittedProjects<T = Models.PermittedProjects>(\n    parameters: Parameters.GetPermittedProjects | undefined,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns all the projects where the user is granted a list of project permissions.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:** None.\n   */\n  async getPermittedProjects<T = Models.PermittedProjects>(\n    parameters?: Parameters.GetPermittedProjects,\n    callback?: never,\n  ): Promise<T>;\n  async getPermittedProjects<T = Models.PermittedProjects>(\n    parameters?: Parameters.GetPermittedProjects,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/permissions/project',\n      method: 'POST',\n      data: {\n        permissions: parameters?.permissions,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n}\n"],"names":[],"mappings":";;MAMa,WAAW,CAAA;AACF,IAAA,MAAA;AAApB,IAAA,WAAA,CAAoB,MAAc,EAAA;QAAd,IAAA,CAAA,MAAM,GAAN,MAAM;IAAW;AA4ErC,IAAA,MAAM,gBAAgB,CACpB,UAAwC,EACxC,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,2BAA2B;AAChC,YAAA,MAAM,EAAE,KAAK;AACb,YAAA,MAAM,EAAE;gBACN,UAAU,EAAE,UAAU,EAAE,UAAU;gBAClC,SAAS,EAAE,UAAU,EAAE,SAAS;gBAChC,QAAQ,EAAE,UAAU,EAAE,QAAQ;gBAC9B,OAAO,EAAE,UAAU,EAAE,OAAO;gBAC5B,WAAW,EAAE,UAAU,EAAE,WAAW;gBACpC,WAAW,EAAE,UAAU,EAAE,WAAW;gBACpC,wBAAwB,EAAE,UAAU,EAAE,wBAAwB;gBAC9D,SAAS,EAAE,UAAU,EAAE,SAAS;AACjC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;IA0BA,MAAM,iBAAiB,CAAyB,QAAsB,EAAA;AACpE,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,yBAAyB;AAC9B,YAAA,MAAM,EAAE,KAAK;SACd;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAsEA,IAAA,MAAM,kBAAkB,CACtB,UAA0C,EAC1C,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,+BAA+B;AACpC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,IAAI,EAAE;gBACJ,SAAS,EAAE,UAAU,EAAE,SAAS;gBAChC,iBAAiB,EAAE,UAAU,EAAE,iBAAiB;gBAChD,kBAAkB,EAAE,UAAU,EAAE,kBAAkB;AACnD,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AAwBA,IAAA,MAAM,oBAAoB,CACxB,UAA4C,EAC5C,QAAsB,EAAA;AAEtB,QAAA,MAAM,MAAM,GAAkB;AAC5B,YAAA,GAAG,EAAE,iCAAiC;AACtC,YAAA,MAAM,EAAE,MAAM;AACd,YAAA,IAAI,EAAE;gBACJ,WAAW,EAAE,UAAU,EAAE,WAAW;AACrC,aAAA;SACF;QAED,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,MAAM,EAAE,QAAQ,CAAC;IAClD;AACD;;;;"}