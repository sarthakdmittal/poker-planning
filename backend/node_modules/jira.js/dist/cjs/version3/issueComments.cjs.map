{"version":3,"file":"issueComments.cjs","sources":["../../../../src/version3/issueComments.ts"],"sourcesContent":["import type * as Models from './models';\nimport type * as Parameters from './parameters';\nimport type { Client } from '../clients';\nimport type { Callback } from '../callback';\nimport type { RequestConfig } from '../requestConfig';\n\nexport class IssueComments {\n  constructor(private client: Client) {}\n\n  /**\n   * Returns a [paginated](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#pagination) list of\n   * comments specified by a list of comment IDs.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   * Comments are returned where the user:\n   *\n   * - Has _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project containing\n   *   the comment.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - If the comment has visibility restrictions, belongs to the group or has the role visibility is restricted to.\n   */\n  async getCommentsByIds<T = Models.PageComment>(\n    parameters: Parameters.GetCommentsByIds,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns a [paginated](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#pagination) list of\n   * comments specified by a list of comment IDs.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   * Comments are returned where the user:\n   *\n   * - Has _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project containing\n   *   the comment.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - If the comment has visibility restrictions, belongs to the group or has the role visibility is restricted to.\n   */\n  async getCommentsByIds<T = Models.PageComment>(parameters: Parameters.GetCommentsByIds, callback?: never): Promise<T>;\n  async getCommentsByIds<T = Models.PageComment>(\n    parameters: Parameters.GetCommentsByIds,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: '/rest/api/3/comment/list',\n      method: 'POST',\n      params: {\n        expand: parameters.expand,\n      },\n      data: {\n        ids: parameters.ids,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns all comments for an issue.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   * Comments are included in the response where the user has:\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project containing the\n   *   comment.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - If the comment has visibility restrictions, belongs to the group or has the role visibility is role visibility is\n   *   restricted to.\n   */\n  async getComments<T = Models.PageOfComments>(\n    parameters: Parameters.GetComments | string,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns all comments for an issue.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   * Comments are included in the response where the user has:\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project containing the\n   *   comment.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - If the comment has visibility restrictions, belongs to the group or has the role visibility is role visibility is\n   *   restricted to.\n   */\n  async getComments<T = Models.PageOfComments>(\n    parameters: Parameters.GetComments | string,\n    callback?: never,\n  ): Promise<T>;\n  async getComments<T = Models.PageOfComments>(\n    parameters: Parameters.GetComments | string,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const issueIdOrKey = typeof parameters === 'string' ? parameters : parameters.issueIdOrKey;\n\n    const config: RequestConfig = {\n      url: `/rest/api/3/issue/${issueIdOrKey}/comment`,\n      method: 'GET',\n      params: {\n        startAt: typeof parameters !== 'string' && parameters.startAt,\n        maxResults: typeof parameters !== 'string' && parameters.maxResults,\n        orderBy: typeof parameters !== 'string' && parameters.orderBy,\n        expand: typeof parameters !== 'string' && parameters.expand,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Adds a comment to an issue.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ and _Add comments_ [ project permission](https://confluence.atlassian.com/x/yodKLg) for the\n   *   project that the issue containing the comment is in.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   */\n  async addComment<T = Models.Comment>(parameters: Parameters.AddComment, callback: Callback<T>): Promise<void>;\n  /**\n   * Adds a comment to an issue.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ and _Add comments_ [ project permission](https://confluence.atlassian.com/x/yodKLg) for the\n   *   project that the issue containing the comment is in.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   */\n  async addComment<T = Models.Comment>(parameters: Parameters.AddComment, callback?: never): Promise<T>;\n  async addComment<T = Models.Comment>(parameters: Parameters.AddComment, callback?: Callback<T>): Promise<void | T> {\n    const body =\n      typeof parameters.comment === 'string'\n        ? {\n          type: 'doc',\n          version: 1,\n          content: [\n            {\n              type: 'paragraph',\n              content: [{ type: 'text', text: parameters.comment }],\n            },\n          ],\n        }\n        : parameters.comment;\n\n    const config: RequestConfig = {\n      url: `/rest/api/3/issue/${parameters.issueIdOrKey}/comment`,\n      method: 'POST',\n      params: {\n        expand: parameters.expand,\n      },\n      data: {\n        author: parameters.author,\n        body,\n        created: parameters.created,\n        id: parameters.id,\n        jsdAuthorCanSeeRequest: parameters.jsdAuthorCanSeeRequest,\n        jsdPublic: parameters.jsdPublic,\n        parentId: parameters.parentId,\n        properties: parameters.properties,\n        renderedBody: parameters.renderedBody,\n        self: parameters.self,\n        updateAuthor: parameters.updateAuthor,\n        updated: parameters.updated,\n        visibility: parameters.visibility,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns a comment.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project containing the\n   *   comment.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - If the comment has visibility restrictions, the user belongs to the group or has the role visibility is restricted\n   *   to.\n   */\n  async getComment<T = Models.Comment>(parameters: Parameters.GetComment, callback: Callback<T>): Promise<void>;\n  /**\n   * Returns a comment.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project containing the\n   *   comment.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - If the comment has visibility restrictions, the user belongs to the group or has the role visibility is restricted\n   *   to.\n   */\n  async getComment<T = Models.Comment>(parameters: Parameters.GetComment, callback?: never): Promise<T>;\n  async getComment<T = Models.Comment>(parameters: Parameters.GetComment, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/3/issue/${parameters.issueIdOrKey}/comment/${parameters.id}`,\n      method: 'GET',\n      params: {\n        expand: parameters.expand,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Updates a comment.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project that the issue\n   *   containing the comment is in.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - _Edit all comments_[ project permission](https://confluence.atlassian.com/x/yodKLg) to update any comment or _Edit\n   *   own comments_ to update comment created by the user.\n   * - If the comment has visibility restrictions, the user belongs to the group or has the role visibility is restricted\n   *   to.\n   *\n   * **WARNING:** Child comments inherit visibility from their parent comment. Attempting to update a child comment's\n   * visibility will result in a 400 (Bad Request) error.\n   */\n  async updateComment<T = Models.Comment>(parameters: Parameters.UpdateComment, callback: Callback<T>): Promise<void>;\n  /**\n   * Updates a comment.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project that the issue\n   *   containing the comment is in.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - _Edit all comments_[ project permission](https://confluence.atlassian.com/x/yodKLg) to update any comment or _Edit\n   *   own comments_ to update comment created by the user.\n   * - If the comment has visibility restrictions, the user belongs to the group or has the role visibility is restricted\n   *   to.\n   *\n   * **WARNING:** Child comments inherit visibility from their parent comment. Attempting to update a child comment's\n   * visibility will result in a 400 (Bad Request) error.\n   */\n  async updateComment<T = Models.Comment>(parameters: Parameters.UpdateComment, callback?: never): Promise<T>;\n  async updateComment<T = Models.Comment>(\n    parameters: Parameters.UpdateComment,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const body =\n      typeof parameters.body === 'string'\n        ? {\n          type: 'doc',\n          version: 1,\n          content: [\n            {\n              type: 'paragraph',\n              content: [{ type: 'text', text: parameters.body }],\n            },\n          ],\n        }\n        : parameters.body;\n\n    const config: RequestConfig = {\n      url: `/rest/api/3/issue/${parameters.issueIdOrKey}/comment/${parameters.id}`,\n      method: 'PUT',\n      params: {\n        notifyUsers: parameters.notifyUsers,\n        overrideEditableFlag: parameters.overrideEditableFlag,\n        expand: parameters.expand,\n      },\n      data: {\n        body,\n        visibility: parameters.visibility,\n        properties: parameters.properties,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Deletes a comment.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project that the issue\n   *   containing the comment is in.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - _Delete all comments_[ project permission](https://confluence.atlassian.com/x/yodKLg) to delete any comment or\n   *   _Delete own comments_ to delete comment created by the user,\n   * - If the comment has visibility restrictions, the user belongs to the group or has the role visibility is restricted\n   *   to.\n   */\n  async deleteComment<T = void>(parameters: Parameters.DeleteComment, callback: Callback<T>): Promise<void>;\n  /**\n   * Deletes a comment.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v3/intro/#permissions) required:**\n   *\n   * - _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for the project that the issue\n   *   containing the comment is in.\n   * - If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission\n   *   to view the issue.\n   * - _Delete all comments_[ project permission](https://confluence.atlassian.com/x/yodKLg) to delete any comment or\n   *   _Delete own comments_ to delete comment created by the user,\n   * - If the comment has visibility restrictions, the user belongs to the group or has the role visibility is restricted\n   *   to.\n   */\n  async deleteComment<T = void>(parameters: Parameters.DeleteComment, callback?: never): Promise<T>;\n  async deleteComment<T = void>(parameters: Parameters.DeleteComment, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/3/issue/${parameters.issueIdOrKey}/comment/${parameters.id}`,\n      method: 'DELETE',\n      params: {\n        parentId: parameters.parentId,\n      },\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n}\n"],"names":[],"mappings":"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"}