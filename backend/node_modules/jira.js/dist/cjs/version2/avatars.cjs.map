{"version":3,"file":"avatars.cjs","sources":["../../../../src/version2/avatars.ts"],"sourcesContent":["import type * as Models from './models';\nimport type * as Parameters from './parameters';\nimport type { Client } from '../clients';\nimport type { Callback } from '../callback';\nimport type { RequestConfig } from '../requestConfig';\n\nexport class Avatars {\n  constructor(private client: Client) {}\n\n  /**\n   * Returns a list of system avatar details by owner type, where the owner types are issue type, project, user or\n   * priority.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:** None.\n   */\n  async getAllSystemAvatars<T = Models.SystemAvatars>(\n    parameters: Parameters.GetAllSystemAvatars | string,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns a list of system avatar details by owner type, where the owner types are issue type, project, user or\n   * priority.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:** None.\n   */\n  async getAllSystemAvatars<T = Models.SystemAvatars>(\n    parameters: Parameters.GetAllSystemAvatars | string,\n    callback?: never,\n  ): Promise<T>;\n  async getAllSystemAvatars<T = Models.SystemAvatars>(\n    parameters: Parameters.GetAllSystemAvatars | string,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const type = typeof parameters === 'string' ? parameters : parameters.type;\n\n    const config: RequestConfig = {\n      url: `/rest/api/2/avatar/${type}/system`,\n      method: 'GET',\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns the system and custom avatars for a project, issue type or priority.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   *\n   * - For custom project avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for\n   *   the project the avatar belongs to.\n   * - For custom issue type avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg)\n   *   for at least one project the issue type is used in.\n   * - For system avatars, none.\n   * - For priority avatars, none.\n   */\n  async getAvatars<T = Models.Avatars>(parameters: Parameters.GetAvatars, callback: Callback<T>): Promise<void>;\n  /**\n   * Returns the system and custom avatars for a project, issue type or priority.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   *\n   * - For custom project avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for\n   *   the project the avatar belongs to.\n   * - For custom issue type avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg)\n   *   for at least one project the issue type is used in.\n   * - For system avatars, none.\n   * - For priority avatars, none.\n   */\n  async getAvatars<T = Models.Avatars>(parameters: Parameters.GetAvatars, callback?: never): Promise<T>;\n  async getAvatars<T = Models.Avatars>(parameters: Parameters.GetAvatars, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/2/universal_avatar/type/${parameters.type}/owner/${parameters.entityId}`,\n      method: 'GET',\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Loads a custom avatar for a project, issue type or priority.\n   *\n   * The avatar is cropped to a square. If no crop parameters are specified, the square originates at the top left of\n   * the image. The length of the square's sides is set to the smaller of the height or width of the image.\n   *\n   * The cropped image is then used to create avatars of 16x16, 24x24, 32x32, and 48x48 in size.\n   *\n   * After creating the avatar use:\n   *\n   * - [Update issue\n   *   type](https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issue-types/#api-rest-api-2-issuetype-id-put)\n   *   to set it as the issue type's displayed avatar.\n   * - [Set project\n   *   avatar](https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-project-avatars/#api-rest-api-2-project-projectidorkey-avatar-put)\n   *   to set it as the project's displayed avatar.\n   * - [Update\n   *   priority](https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issue-priorities/#api-rest-api-2-priority-id-put)\n   *   to set it as the priority's displayed avatar.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   * _Administer Jira_ [global permission](https://confluence.atlassian.com/x/x4dKLg).\n   */\n  async storeAvatar<T = Models.Avatar>(parameters: Parameters.StoreAvatar, callback: Callback<T>): Promise<void>;\n  /**\n   * Loads a custom avatar for a project, issue type or priority.\n   *\n   * The avatar is cropped to a square. If no crop parameters are specified, the square originates at the top left of\n   * the image. The length of the square's sides is set to the smaller of the height or width of the image.\n   *\n   * The cropped image is then used to create avatars of 16x16, 24x24, 32x32, and 48x48 in size.\n   *\n   * After creating the avatar use:\n   *\n   * - [Update issue\n   *   type](https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issue-types/#api-rest-api-2-issuetype-id-put)\n   *   to set it as the issue type's displayed avatar.\n   * - [Set project\n   *   avatar](https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-project-avatars/#api-rest-api-2-project-projectidorkey-avatar-put)\n   *   to set it as the project's displayed avatar.\n   * - [Update\n   *   priority](https://developer.atlassian.com/cloud/jira/platform/rest/v2/api-group-issue-priorities/#api-rest-api-2-priority-id-put)\n   *   to set it as the priority's displayed avatar.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   * _Administer Jira_ [global permission](https://confluence.atlassian.com/x/x4dKLg).\n   */\n  async storeAvatar<T = Models.Avatar>(parameters: Parameters.StoreAvatar, callback?: never): Promise<T>;\n  async storeAvatar<T = Models.Avatar>(parameters: Parameters.StoreAvatar, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/2/universal_avatar/type/${parameters.type}/owner/${parameters.entityId}`,\n      method: 'POST',\n      headers: {\n        'X-Atlassian-Token': 'no-check',\n        'Content-Type': parameters.mimeType,\n      },\n      params: {\n        x: parameters.x,\n        y: parameters.y,\n        size: parameters.size ?? 0,\n      },\n      data: parameters.avatar,\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Deletes an avatar from a project, issue type or priority.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   * _Administer Jira_ [global permission](https://confluence.atlassian.com/x/x4dKLg).\n   */\n  async deleteAvatar<T = void>(parameters: Parameters.DeleteAvatar, callback: Callback<T>): Promise<void>;\n  /**\n   * Deletes an avatar from a project, issue type or priority.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   * _Administer Jira_ [global permission](https://confluence.atlassian.com/x/x4dKLg).\n   */\n  async deleteAvatar<T = void>(parameters: Parameters.DeleteAvatar, callback?: never): Promise<T>;\n  async deleteAvatar<T = void>(parameters: Parameters.DeleteAvatar, callback?: Callback<T>): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/2/universal_avatar/type/${parameters.type}/owner/${parameters.owningObjectId}/avatar/${parameters.id}`,\n      method: 'DELETE',\n    };\n\n    return this.client.sendRequest(config, callback);\n  }\n\n  /**\n   * Returns the default project, issue type or priority avatar image.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:** None.\n   */\n  async getAvatarImageByType<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByType | string,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns the default project, issue type or priority avatar image.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:** None.\n   */\n  async getAvatarImageByType<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByType | string,\n    callback?: never,\n  ): Promise<T>;\n  async getAvatarImageByType<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByType | string,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const type = typeof parameters === 'string' ? parameters : parameters.type;\n\n    const config: RequestConfig = {\n      url: `/rest/api/2/universal_avatar/view/type/${type}`,\n      method: 'GET',\n      responseType: 'arraybuffer',\n      params: {\n        size: typeof parameters !== 'string' ? parameters.size : undefined,\n        format: typeof parameters !== 'string' ? parameters.format : undefined,\n      },\n    };\n\n    const {\n      data: avatar,\n      headers: { 'content-type': contentTypeWithEncoding },\n    } = await this.client.sendRequestFullResponse<T>(config);\n\n    const contentType = contentTypeWithEncoding.split(';')[0].trim();\n\n    return this.client.handleSuccessResponse({ contentType, avatar }, callback);\n  }\n\n  /**\n   * Returns a project, issue type or priority avatar image by ID.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   *\n   * - For system avatars, none.\n   * - For custom project avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for\n   *   the project the avatar belongs to.\n   * - For custom issue type avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg)\n   *   for at least one project the issue type is used in.\n   * - For priority avatars, none.\n   */\n  async getAvatarImageByID<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByID,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns a project, issue type or priority avatar image by ID.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   *\n   * - For system avatars, none.\n   * - For custom project avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for\n   *   the project the avatar belongs to.\n   * - For custom issue type avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg)\n   *   for at least one project the issue type is used in.\n   * - For priority avatars, none.\n   */\n  async getAvatarImageByID<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByID,\n    callback?: never,\n  ): Promise<T>;\n  async getAvatarImageByID<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByID,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/2/universal_avatar/view/type/${parameters.type}/avatar/${parameters.id}`,\n      method: 'GET',\n      responseType: 'arraybuffer',\n      params: {\n        size: parameters.size,\n        format: parameters.format,\n      },\n    };\n\n    const {\n      data: avatar,\n      headers: { 'content-type': contentTypeWithEncoding },\n    } = await this.client.sendRequestFullResponse<T>(config);\n\n    const contentType = contentTypeWithEncoding.split(';')[0].trim();\n\n    return this.client.handleSuccessResponse({ contentType, avatar }, callback);\n  }\n\n  /**\n   * Returns the avatar image for a project, issue type or priority.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   *\n   * - For system avatars, none.\n   * - For custom project avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for\n   *   the project the avatar belongs to.\n   * - For custom issue type avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg)\n   *   for at least one project the issue type is used in.\n   * - For priority avatars, none.\n   */\n  async getAvatarImageByOwner<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByOwner,\n    callback: Callback<T>,\n  ): Promise<void>;\n  /**\n   * Returns the avatar image for a project, issue type or priority.\n   *\n   * This operation can be accessed anonymously.\n   *\n   * **[Permissions](https://developer.atlassian.com/cloud/jira/platform/rest/v2/intro/#permissions) required:**\n   *\n   * - For system avatars, none.\n   * - For custom project avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg) for\n   *   the project the avatar belongs to.\n   * - For custom issue type avatars, _Browse projects_ [project permission](https://confluence.atlassian.com/x/yodKLg)\n   *   for at least one project the issue type is used in.\n   * - For priority avatars, none.\n   */\n  async getAvatarImageByOwner<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByOwner,\n    callback?: never,\n  ): Promise<T>;\n  async getAvatarImageByOwner<T = Models.AvatarWithDetails>(\n    parameters: Parameters.GetAvatarImageByOwner,\n    callback?: Callback<T>,\n  ): Promise<void | T> {\n    const config: RequestConfig = {\n      url: `/rest/api/2/universal_avatar/view/type/${parameters.type}/owner/${parameters.entityId}`,\n      method: 'GET',\n      responseType: 'arraybuffer',\n      params: {\n        size: parameters.size,\n        format: parameters.format,\n      },\n    };\n\n    const {\n      data: avatar,\n      headers: { 'content-type': contentTypeWithEncoding },\n    } = await this.client.sendRequestFullResponse<T>(config);\n\n    const contentType = contentTypeWithEncoding.split(';')[0].trim();\n\n    return this.client.handleSuccessResponse({ contentType, avatar }, callback);\n  }\n}\n"],"names":[],"mappings":"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"}